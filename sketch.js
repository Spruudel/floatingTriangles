var particles = [];

var maxDistance = 180;

function setup() {
    createCanvas(windowWidth, windowHeight);

    var number = Math.floor((windowWidth * windowHeight) / 32914); // Generated by using (1920*1200) / x = 70, as this seemed to be okay
    for (var i = 0; i < number; i++) {
        particles.push(new Particle(random(width), random(height)));
    }
}

function draw() {
    background(51);

    for (var i = 0; i < particles.length; i++) {
        particles[i].move();
        noStroke();
        particles[i].show();
    }

    for (var i = 0; i < particles.length; i++) {
        if (particles[i].offScreen()) {
            particles.splice(i, 1);
            newParticle();
        }
    }

    stroke(115, 100);
    for (var i = 0; i < particles.length; i++) {
        var neighbours = particles[i].checkDist();
        if (neighbours.length > 0) {
            for (var j = 0; j < neighbours.length; j++) {
                line(particles[i].pos.x, particles[i].pos.y, particles[neighbours[j]].pos.x, particles[neighbours[j]].pos.y);
            }
        }
    }
}

function newParticle() {
    particles.push(new Particle(random(width), random(height)));
}
